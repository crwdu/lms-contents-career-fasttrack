import { Alert } from "antd";
import { Callout } from "nextra-theme-docs";

# RESTful API

모노리스나 마이크로서비스 구조 내에서 백엔드 서비스는 어떤 방식으로든 데이터에 대한 접근을 관리하고 시스템 내의 다른 파트와 정보를 교환해야 하기 때문에 인터페이스를 구축해야 합니다. RESTful API는 백엔드 서비스가 인터페이스를 구축하는 가장 대표적인 방법론 중 하나입니다. 여러분이 일반적으로 접할 수 있는 Github, Youtube 등의 API 문서를 보면, RESTful(혹은 REST) API라고 명시되어 있음을 확인할 수 있고, 이는 RESTful API 방법론에 따라 설계된 API임을 의미합니다.

<br />
<br />

## REST란?

REST(Representational State Transfer)은 API가 어떤 식으로 구성되고 작동해야 하는지에 대한 소프트웨어 설계 방법론입니다. REST 방법론에는 여러 가지 조건들이 있습니다.

<br />

### 1. Uniform interface (균일한 인터페이스)

균일한 인터페이스는 모든 RESTful 웹 서비스 디자인의 기본입니다. 이는 서버가 표준에 맞는 형식으로 정보를 전송함을 나타냅니다. 서버가 내부적으로 저장하는 데이터의 형식과 외부적으로 전송하는 데이터의 형식은 다를 수 있지만, 외부에 전송하는 데이터는 표준에 맞는 형식으로 전송되어야 합니다. 예를 들어, 서버는 데이터를 단순 텍스트로 저장하되, HTML 형식으로 전송할 수 있습니다.

또한, 균일한 인터페이스는 uri로 지정한 리소스에 대한 작업을 항상 통일되고 균일한 인터페이스를 이용해 작업하도록 하는 방향을 의미합니다.

<br />

### 2. Stateless (무상태성)

REST 아키텍처에서 무상태는 서버가 이전의 모든 요청과 독립적으로 모든 클라이언트 요청을 완료하는 통신 방법을 나타냅니다. 클라이언트는 임의의 순서로 리소스를 요청할 수 있으며 모든 요청은 무상태이거나 다른 요청과 분리됩니다. 이 REST API 설계 제약 조건은 서버가 매번 단일 요청을 완전히 이해하여 이행할 수 있음을 의미합니다. 

즉, 세션정보 등을 별도로 저장하지 않고 서버는 현재 들어오는 요청을 각각 독립적으로 처리해야 합니다.

<br />

### 3. Layered system (계층 시스템)

계층화된 시스템 아키텍처에서 클라이언트는 클라이언트와 서버 사이의 다른 승인된 중개자에게 연결할 수 있으며 여전히 서버로부터도 응답을 받습니다. 서버는 요청을 다른 서버로 전달할 수도 있습니다. 클라이언트 요청을 이행하기 위해 함께 작동하는 보안, 애플리케이션 및 비즈니스 로직과 같은 여러 계층으로 여러 서버에서 실행되도록 RESTful 웹 서비스를 설계할 수 있습니다. 이러한 계층은 클라이언트에 보이지 않는 상태로 유지됩니다.

쉽게 말해, 클라이언트가 요청한 데이터를 얻는 과정에서 프록시, 게이트웨이 등의 중간 매체가 존재할 수 있음을 의미합니다.

<br />

### 4. Cacheability (캐싱 가능성)

RESTful 웹 서비스는 서버 응답 시간을 개선하기 위해 클라이언트 또는 중개자에 일부 응답을 저장하는 프로세스인 캐싱을 지원합니다. 예를 들어, 모든 페이지에 공통 머리글 및 바닥글 이미지가 있는 웹 사이트를 방문한다고 가정해 보겠습니다. 새로운 웹 사이트 페이지를 방문할 때마다 서버는 동일한 이미지를 다시 전송해야 합니다. 이를 피하기 위해 클라이언트는 첫 번째 응답 후에 해당 이미지를 캐싱하거나 저장한 다음 캐싱해놓은 이미지를 사용합니다.

구체적으로는 HTTP 프로토콜의 일부인 Last-Modified 혹은 E-tag 등을 활용하여 구현할 수 있습니다.

<br />

이외에도 몇 가지가 추가적으로 자주 언급되기는 하지만, 위에서 언급한 4가지가 가장 핵심적인 파트이므로 잘 숙지해놓으시면 좋을것 같습니다.

<br />
<br />

## RESTful API의 장점

<br />

### 1. 확장성

RESTful API를 구현하는 시스템은 REST가 클라이언트-서버 상호 작용을 최적화하기 때문에 효율적으로 확장성을 조정할 수 있습니다. 무상태는 서버가 과거 클라이언트 요청 정보를 유지할 필요가 없기 때문에 서버의 부하를 제거합니다. 잘 관리된 캐싱은 일부 클라이언트-서버 상호 작용을 부분적으로 또는 완전히 제거합니다. 이러한 모든 기능은 성능을 저하시키는 통신 병목 현상을 일으키지 않으면서 확장성을 지원합니다.

<br />

### 2. 유연성

RESTful 웹 서비스는 완전한 클라이언트-서버 분리를 지원합니다. 각 부분이 독립적으로 발전할 수 있도록 다양한 서버 구성 요소를 단순화하고 분리합니다. 서버 어플리케이션의 플랫폼 또는 기술 변경은 클라이언트 어플리케이션에 영향을 주지 않습니다. 어플리케이션 기능을 계층화하는 것은 우리 서비스의 유연성을 더욱 향상시킵니다. 예를 들어, 개발자는 어플리케이션 로직을 다시 작성하지 않고도 데이터베이스에 변경 작업을 할 수 있습니다.

<br />

### 3. 독립성

RESTful API는 사용되는 기술과 독립적입니다. API 설계에 영향을 주지 않고 다양한 프로그래밍 언어로 클라이언트 및 서버 어플리케이션을 모두 작성할 수 있습니다. 또한 통신에 영향을 주지 않고 양쪽의 기본적인 기술을 변경할 수 있습니다.

<br />
<br />

## 디자인 가이드

<br />

### 1. URI는 리소스를 복수형 명사로 표현해야 한다.

- 안 좋은 예: `DELETE /users/delete/1`
- 좋은 예: `DELETE /users/1`

<br />

### 2. 리소스에 대한 행위는 적절한 HTTP 메소드로 표현해야 한다.

- 안 좋은 예: `GET /users/delete/1`
- 좋은 예: `DELETE /users/1`

- 안 좋은 예: `GET /users/1/articles/create`
- 좋은 예: `POST /users/1/articles`

<br />

### 3. uri는 리소스의 계층 구조를 표현해야 한다.

- 특정 사용자가 작성한 모든 게시글을 조회할 경우: `GET /users/1/articles`
- 특정 사용자가 작성한 특정 게시글을 조회할 경우: `GET /users/1/articles/2`
- 특정 사용자가 작성한 특정 게시글의 좋아요 목록을 조회할 경우: `GET /users/1/articles/2/likes`

<br />

### 기타

- URI에는 대문자나 `_`는 되도록 사용하지 않습니다.
- 파일 확장자 또한 URI에 포함하지 않습니다. 데이터의 형식은 HTTP 헤더를 활용해 표현합니다.

<br />

### 마무리

앞으로 여러분께서 백엔드 서비스의 인터페이스에 대한 고민을 할때, 반드시 REST 규칙에 대해 기억하고 적용해보도록 하세요. 구체적으로 잘 적용된 예시들을 참고해보고 싶다면, Github, Youtube, Twitter 등의 REST API 문서를 살펴보시고 해당 서비스의 REST API는 요청과 응답 그리고 URI가 어떤 식으로 설계되어 있는지 참고해보면 아주 큰 도움이 될 것입니다.
